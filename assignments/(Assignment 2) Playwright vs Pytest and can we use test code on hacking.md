스터디를 들으면서 내가 든 의문점은 크게 2가지였다
1. 지금 배우는 Playwright과 기존에 FastAPI 백엔드에서 활용하던 Pytest를 비교하면 어떻게 다를까?
2. 이 테스트 코드를 해킹에 이용할 수도 있을까?
이 2가지 의문점을 이번 글에서 해결해보려고 한다

---

# 기본 개념
> [!info] Playwright
> 웹 App을 E2E test하기 위해 사용하는 도구
> 사용자가 직접적으로 이 웹을 사용할 때를 가정하고 스토리라인대로 코드를 작성해서 테스트한다
> > [!check] 특징
> > `Cross Browsing`: Chromium, WebKit, Firefox를 포함한 여러 웹 브라우저 환경을 테스트할 수 있다
> > `Cross Platform`: Windows, Linux, MacOS 등 로컬 혹은 CI 환경에서 돌아간다 (+Mobile Browser도 지원)
> > `다양한 언어 지원`: Typescript, Javascript, Python, Java, .NET 등을 지원한다
> > `비동기 지원`: 비동기 프로그래밍 모델을 지원해서 빠르고 효율적인 텍스트가 가능하다
> > `Network Monitoring`: 요청과 응답을 모니터링 할 수 있다

> [!info] Pytest
> Python에서 주로 활용되는 Test Framework
> 복잡한 함수나 클래스를 테스트하기 위한 다양한 기능을 제공한다
> > [!check] 특징
> > `간결한 테스트 코드 작성`: 간단한 문법으로 테스트를 작성할 수 있다
> > `자동 테스트 발견`: 특정 규칙에 따라 이름이 지정된 파일과 함수를 자동으로 찾아 테스트를 실행한다
> > `다양한 플러그인 지원`: 다양한 플러그인을 지원해서 기능 확장에 용이하다
> > `고급 Assertion 기능`: 표현식의 결과를 자동으로 출력해주어 디버깅에 용이하다
> > `다양한 테스트 스타일 지원`: xUnit 스타일 뿐만 아니라 단순한 함수 기반 테스트도 지원한다
> > `Fixture 지원`: 테스트 전/후에 실행할 코드를 정의해서, 테스트 환경을 설정하고 정리하는데 도움을 준다

---

# Playwright vs Pytest
이 둘은 찾아보니 애초에 비교 대상이 아니긴 하다
둘 다 테스트 코드라는 공통점이 있지만 테스트를 하는 방식이 다르다
Playwright이 브라우저 자동화 도구에 가깝고,
Pytest는 테스트를 실행하고 관리하는 Framework이다

| 구분 | Playwright | Pytest |
| :--: | :--: | :-: |
| 뭐임? | 웹 브라우저 자동화 라이브러리 | Python Test Framework |
| 용도 | 클릭, 입력, 페이지 이동, 스크린샷 | 테스트 실행, 검증, 리포트 |
| 대상 | 브라우저 (Chromium, Firefox, WebKit) | Test Code 전체 |
| 언어 | Python, JS, TS, Java, C#, ... | Python |
| 단독 테스트 | X (Runner가 필요함) | O |
| E2E Test | O | X (직접 불가능) |
| Assertion | 기본 제공 | 매우 강함 |
| Fixture | X | O (핵심 기능) |
| CI 연동 | O | O (매우 쉬움) |

---

# 테스트 코드가 해킹에 활용되진 않을까?
찾아보니 이런 걱정은 크게 안해도 될 듯 하다
이유는 다음과 같다
1. 테스트 코드는 배포용 서버에서는 실행되지 않음
2. 공격자는 굳이 테스트 코드를 쓸 이유가 없음 (번거로운 것 투성이; 하지만 가능성은 있음)

그런데 이러한 테스트 코드가 위험해질 수 있는 경우가 거의 유일한 경우로는 테스트 계정 또는 관리자 계정이 **하드코딩** 되어져 있는 경우에는 위험하다
하지만 이런 경우는 테스트 코드의 위험이라기 보단 보안 참사에 가깝기에 테스트 코드의 문제는 아니라고 본다

그런데 난 궁금했다
정말 테스트 코드로 취약점이 나온 사례는 없는가?

최신(작년)사례만 가져오겠음
### [CVE-2025-71176](https://www.cve.org/CVERecord?id=CVE-2025-71176)
이 보안 취약점을 살펴보면 Pytest 9.0.2 이하 버전에서 Unix 시스템의 임시 디렉터리 구조(`/tmp/pytest-of-{user}`)를 예측 가능하게 사용하고 있어서 이를 활용하여 DoS 공격 또는 Privilege Escalation 공격이 가능할 수 있다는 가능성이 나온다
그리하여 CVSS 점수를 6.8 중간 정도의 위험 정도로 평가 받는다

### [CVE-2025-9611](https://www.cve.org/CVERecord?id=CVE-2025-9611)
이 취약점은 Microsoft Playwright MCP Server의 Playwright 도구 서버 구성 요소에서 발생한 보안 취약점이다
MCP Server가 Origin Header를 검사하지 않아서 이로 인해 DNS Rebinding(`악성 도메인을 이용해 사용자의 브라우저를 이용해 target 내부 서비스에 비정상적인 요청을 보내는 기법`) 공격을 유도할 수 있다
즉, 완전 자동 까지는 아니지만 사용자의 브라우저를 활용하여 원격 공격이 가능함
CVSS 점수는 7.2로 약간 높은 점수를 받았다

### [CVE-2025-26683](https://www.cve.org/CVERecord?id=CVE-2025-26683)
이 취약점은 Azure Playwright Server의 구성 요소에서 발생한 취약점으로 부적절한 권한 확인이 주요 원인이다
제대로 된 권한 체크를 하지 않아서 공격자가 네트워크를 통해 권한 상승을 할 수 있는 가능성이 있다
CVSS 점수는 8.1로 높은 점수를 받았다

## 결론
이 3가지 취약점을 살펴보면서 느낀점은 완벽한 보안이라는 것은 없지만 최신 버전으로 잘 업데이트하고, 하드코딩 하는 것만 주의한다면 큰 문제는 없어 보인다
첫번째는 업데이트를 통해서 해결할 수 있었고, 2번째와 3번째 또한 Playwright 자체에서 발생한 문제가 아니라 특정 환경에서만 발생한 문제로 업데이트를 꾸준히 해서 해결할 수 있는 문제였다

우리 모두 코드를 작성할 때 **업데이트**를 꾸준히 하고 **하드코딩**을 주의하자
